<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av" x:Class="LocomotiveAnimation.MainWindow"
        Title="Projeto de 2D - Processamento de Imagens" Height="450" Width="800">

    <Window.Resources>
        <ControlTemplate x:Key="SmokeTemplate" TargetType="{x:Type ContentControl}">
            <Grid>
                <Ellipse Fill="#000000" Opacity="1" Width="3" Height="3" />
                <Ellipse Fill="#FF222222" Opacity="0.8" Width="9" Height="9" />
                <Ellipse Fill="#99333333" Opacity="0.5" Width="12" Height="12" />
                <Ellipse Fill="#66444444" Opacity="0.3" Width="15" Height="15" />
                <Ellipse Fill="#44666666" Opacity="0.2" Width="19" Height="19" Canvas.Left="5" Canvas.Top="5" />
                <Ellipse Fill="#22888888" Opacity="0.1" Width="22" Height="22" Canvas.Left="-5" Canvas.Top="10" />
                <Ellipse Fill="#05CCCCCC" Opacity="0.1" Width="27" Height="27" />
            </Grid>
        </ControlTemplate>
        <ControlTemplate x:Key="WheelTemplate" TargetType="{x:Type ContentControl}">
            <Grid>
                <Ellipse Fill="Black" Width="50" Height="50" />

                <Rectangle Fill="Silver" Width="2" Height="50" RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="0" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle Fill="Silver" Width="2" Height="50" RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="90" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle Fill="Silver" Width="2" Height="50" RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="45" />
                    </Rectangle.RenderTransform>
                </Rectangle>
                <Rectangle Fill="Silver" Width="2" Height="50" RenderTransformOrigin="0.5,0.5">
                    <Rectangle.RenderTransform>
                        <RotateTransform Angle="135" />
                    </Rectangle.RenderTransform>
                </Rectangle>
            </Grid>
        </ControlTemplate>
    </Window.Resources>

    <Canvas x:Name="mainCanvas">
        <Canvas.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#36393a" Offset="0.0"/>
                <GradientStop Color="#0000FF" Offset="3.0"/>
            </LinearGradientBrush>
        </Canvas.Background>
        <Canvas.Triggers>
            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation
                            Storyboard.TargetName="locomotiveTranslateTransform"
                            Storyboard.TargetProperty="X"
                            From="0" To="600" Duration="0:0:5"
                            AutoReverse="True" RepeatBehavior="Forever" />

                        <DoubleAnimation
                            Storyboard.TargetName="frontWheelRotateTransform"
                            Storyboard.TargetProperty="Angle"
                            From="0" To="1800" Duration="0:0:5"
                            RepeatBehavior="Forever"
                            AutoReverse="True"/>

                        <DoubleAnimation
                            Storyboard.TargetName="backWheelRotateTransform"
                            Storyboard.TargetProperty="Angle"
                            From="0" To="1800" Duration="0:0:5"
                            RepeatBehavior="Forever"
                            AutoReverse="True"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Canvas.Triggers>

        <Canvas x:Name="locomotiveGroup"
                Canvas.Left="50" Canvas.Top="100">
            <Canvas.RenderTransform>
                <TranslateTransform x:Name="locomotiveTranslateTransform" />
            </Canvas.RenderTransform>

            <Rectangle Fill="#8B4513" Height="60" Width="250" Canvas.Top="50" Canvas.Left="0" />
            <Rectangle Fill="#A0522D" Height="80" Width="100" Canvas.Top="0" Canvas.Left="150" />
            <Path Fill="Gray" Data="M 100,50 L 110,50 L 110,20 L 120,20 L 120,10 L 100,10 Z"
                  Stretch="Fill" Canvas.Top="-40" Canvas.Left="240" />

            <ContentControl x:Name="backWheelContainer"
                            Template="{StaticResource WheelTemplate}"
                            Width="50" Height="50"
                            Canvas.Left="40" Canvas.Top="80"
                            RenderTransformOrigin="0.5,0.5">
                <ContentControl.RenderTransform>
                    <RotateTransform x:Name="backWheelRotateTransform" />
                </ContentControl.RenderTransform>
            </ContentControl>

            <ContentControl x:Name="frontWheelContainer"
                            Template="{StaticResource WheelTemplate}"
                            Width="50" Height="50"
                            Canvas.Left="180" Canvas.Top="80"
                            RenderTransformOrigin="0.5,0.5">
                <ContentControl.RenderTransform>
                    <RotateTransform x:Name="frontWheelRotateTransform" />
                </ContentControl.RenderTransform>
            </ContentControl>
            <ContentControl Template="{StaticResource SmokeTemplate}"
                Width="30" Height="30"
                Canvas.Left="193" Canvas.Top="-66">
                <ContentControl.RenderTransform>
                    <TranslateTransform x:Name="smokeTranslate" Y="0" />
                </ContentControl.RenderTransform>
            </ContentControl>

            <ContentControl Template="{StaticResource SmokeTemplate}"
                Width="30" Height="30"
                Canvas.Left="110" Canvas.Top="-98" HorizontalAlignment="Center" VerticalAlignment="Top">
                <ContentControl.RenderTransform>
                    <TranslateTransform x:Name="smokeTranslate1" Y="0" />
                </ContentControl.RenderTransform>
            </ContentControl>
            <ContentControl Template="{StaticResource SmokeTemplate}"
                Width="30" Height="30"
                Canvas.Left="153" Canvas.Top="-87" HorizontalAlignment="Left" VerticalAlignment="Top">
                <ContentControl.RenderTransform>
                    <TranslateTransform x:Name="smokeTranslate2" Y="0" />
                </ContentControl.RenderTransform>
            </ContentControl>

        </Canvas>

        <Line X1="0" Y1="225" X2="800" Y2="225" Stroke="DarkGray" StrokeThickness="5" />

    </Canvas>
</Window>
